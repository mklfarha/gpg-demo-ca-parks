{"ast":null,"code":"\"use strict\";\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PopupManagerInternal = void 0;\nvar generateGuid_1 = require(\"../utils/generateGuid\");\nvar PopupItem_1 = require(\"./PopupItem\");\nvar CLOSED_POPUPS_THRESHOLD = 10;\nvar PopupManagerInternal = /** @class */function () {\n  function PopupManagerInternal() {\n    var _this = this;\n    this.openPopups = [];\n    this._closedPopups = [];\n    this.onPopupsChangeEvents = [];\n    this.open = function (componentClass, popupProps) {\n      if (popupProps && popupProps.isOpen !== undefined) {\n        throw new Error(\"it is not allowed to send 'isOpen' in popupProps to 'popupManager.open(component, popupProps)'\");\n      }\n      var guid = generateGuid_1.generateGuid();\n      var newPopupItem = new PopupItem_1.PopupItem(componentClass, popupProps, guid);\n      _this.openPopups.push(newPopupItem);\n      _this.callPopupsChangeEvents();\n      return {\n        close: function () {\n          return _this.close(guid);\n        }\n      };\n    };\n    this.closeAll = function () {\n      _this.openPopups.forEach(function (popup) {\n        popup.close();\n        _this.closedPopups.unshift(popup);\n      });\n      _this.openPopups = [];\n      _this.callPopupsChangeEvents();\n    };\n  }\n  PopupManagerInternal.prototype.callPopupsChangeEvents = function () {\n    this.onPopupsChangeEvents.forEach(function (cb) {\n      return cb();\n    });\n  };\n  Object.defineProperty(PopupManagerInternal.prototype, \"closedPopups\", {\n    get: function () {\n      this._closedPopups.length = Math.min(this._closedPopups.length, CLOSED_POPUPS_THRESHOLD);\n      return this._closedPopups;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  PopupManagerInternal.prototype.subscribeOnPopupsChange = function (callback) {\n    this.onPopupsChangeEvents.push(callback);\n  };\n  Object.defineProperty(PopupManagerInternal.prototype, \"popups\", {\n    get: function () {\n      return __spreadArrays(this.openPopups, this.closedPopups);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  PopupManagerInternal.prototype.close = function (popupGuid) {\n    var currentPopupIndex = this.openPopups.findIndex(function (_a) {\n      var guid = _a.guid;\n      return guid === popupGuid;\n    });\n    if (currentPopupIndex === -1) {\n      return;\n    }\n    var currentPopup = this.openPopups[currentPopupIndex];\n    currentPopup.close();\n    var closedPopup = this.openPopups.splice(currentPopupIndex, 1)[0];\n    this.closedPopups.unshift(closedPopup);\n    this.callPopupsChangeEvents();\n  };\n  return PopupManagerInternal;\n}();\nexports.PopupManagerInternal = PopupManagerInternal;","map":{"version":3,"names":["generateGuid_1","require","PopupItem_1","CLOSED_POPUPS_THRESHOLD","PopupManagerInternal","_this","openPopups","_closedPopups","onPopupsChangeEvents","open","componentClass","popupProps","isOpen","undefined","Error","guid","generateGuid","newPopupItem","PopupItem","push","callPopupsChangeEvents","close","closeAll","forEach","popup","closedPopups","unshift","prototype","cb","Object","defineProperty","get","length","Math","min","subscribeOnPopupsChange","callback","__spreadArrays","popupGuid","currentPopupIndex","findIndex","_a","currentPopup","closedPopup","splice","exports"],"sources":["../../../src/__internal__/popupManagerInternal.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;AAAA,IAAAA,cAAA,GAAAC,OAAA;AAEA,IAAAC,WAAA,GAAAD,OAAA;AAGA,IAAME,uBAAuB,GAAG,EAAE;AAIlC,IAAAC,oBAAA;EAAA,SAAAA,qBAAA;IAAA,IAAAC,KAAA;IACU,KAAAC,UAAU,GAAgB,EAAE;IACnB,KAAAC,aAAa,GAAgB,EAAE;IACzC,KAAAC,oBAAoB,GAAe,EAAE;IAsBrC,KAAAC,IAAI,GAAG,UACZC,cAAsC,EACtCC,UAAgC;MAEhC,IAAIA,UAAU,IAAKA,UAAkB,CAACC,MAAM,KAAKC,SAAS,EAAE;QAC1D,MAAM,IAAIC,KAAK,CACb,gGAAgG,CACjG;;MAGH,IAAMC,IAAI,GAAGf,cAAA,CAAAgB,YAAY,EAAE;MAC3B,IAAMC,YAAY,GAAG,IAAIf,WAAA,CAAAgB,SAAS,CAACR,cAAc,EAAEC,UAAiB,EAAEI,IAAI,CAAC;MAC3EV,KAAI,CAACC,UAAU,CAACa,IAAI,CAACF,YAAY,CAAC;MAElCZ,KAAI,CAACe,sBAAsB,EAAE;MAC7B,OAAO;QACLC,KAAK,EAAE,SAAAA,CAAA;UAAM,OAAAhB,KAAI,CAACgB,KAAK,CAACN,IAAI,CAAC;QAAhB;OACd;IACH,CAAC;IAoBM,KAAAO,QAAQ,GAAG;MAChBjB,KAAI,CAACC,UAAU,CAACiB,OAAO,CAAC,UAAAC,KAAK;QAC3BA,KAAK,CAACH,KAAK,EAAE;QACbhB,KAAI,CAACoB,YAAY,CAACC,OAAO,CAACF,KAAK,CAAC;MAClC,CAAC,CAAC;MACFnB,KAAI,CAACC,UAAU,GAAG,EAAE;MACpBD,KAAI,CAACe,sBAAsB,EAAE;IAC/B,CAAC;EACH;EAlEUhB,oBAAA,CAAAuB,SAAA,CAAAP,sBAAsB,GAA9B;IACE,IAAI,CAACZ,oBAAoB,CAACe,OAAO,CAAC,UAAAK,EAAE;MAAI,OAAAA,EAAE,EAAE;IAAJ,CAAI,CAAC;EAC/C,CAAC;EAEDC,MAAA,CAAAC,cAAA,CAAY1B,oBAAA,CAAAuB,SAAA,gBAAY;SAAxB,SAAAI,CAAA;MACE,IAAI,CAACxB,aAAa,CAACyB,MAAM,GAAGC,IAAI,CAACC,GAAG,CAClC,IAAI,CAAC3B,aAAa,CAACyB,MAAM,EACzB7B,uBAAuB,CACxB;MACD,OAAO,IAAI,CAACI,aAAa;IAC3B,CAAC;;;;EAEMH,oBAAA,CAAAuB,SAAA,CAAAQ,uBAAuB,GAA9B,UAA+BC,QAAkB;IAC/C,IAAI,CAAC5B,oBAAoB,CAACW,IAAI,CAACiB,QAAQ,CAAC;EAC1C,CAAC;EAEDP,MAAA,CAAAC,cAAA,CAAW1B,oBAAA,CAAAuB,SAAA,UAAM;SAAjB,SAAAI,CAAA;MACE,OAAAM,cAAA,CAAW,IAAI,CAAC/B,UAAU,EAAK,IAAI,CAACmB,YAAY;IAClD,CAAC;;;;EAsBMrB,oBAAA,CAAAuB,SAAA,CAAAN,KAAK,GAAZ,UAAaiB,SAAiB;IAC5B,IAAMC,iBAAiB,GAAG,IAAI,CAACjC,UAAU,CAACkC,SAAS,CACjD,UAACC,EAAQ;UAAN1B,IAAI,GAAA0B,EAAA,CAAA1B,IAAA;MAAO,OAAAA,IAAI,KAAKuB,SAAS;IAAlB,CAAkB,CACjC;IAED,IAAIC,iBAAiB,KAAK,CAAC,CAAC,EAAE;MAC5B;;IAGF,IAAMG,YAAY,GAAG,IAAI,CAACpC,UAAU,CAACiC,iBAAiB,CAAC;IAEvDG,YAAY,CAACrB,KAAK,EAAE;IAEpB,IAAMsB,WAAW,GAAG,IAAI,CAACrC,UAAU,CAACsC,MAAM,CAACL,iBAAiB,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACnE,IAAI,CAACd,YAAY,CAACC,OAAO,CAACiB,WAAW,CAAC;IACtC,IAAI,CAACvB,sBAAsB,EAAE;EAC/B,CAAC;EAUH,OAAAhB,oBAAC;AAAD,CAAC,EAvED;AAAayC,OAAA,CAAAzC,oBAAA,GAAAA,oBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}